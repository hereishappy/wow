<!DOCTYPE html>
<html lang="hi">
<head>
  <meta charset="UTF-8">
  <title>‡§∏‡•ç‡§ï‡•à‡§´‡•ã‡§≤‡•ç‡§°‡§ø‡§Ç‡§ó ‡§á‡§Ç‡§ü‡§∞‡§µ‡•ç‡§Ø‡•Ç</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    body { font-family: sans-serif; padding: 20px; background: #f4f4f4; }
    h1 { text-align: center; }
    #question-box { background: white; padding: 20px; border-radius: 10px; box-shadow: 0 0 10px rgba(0,0,0,0.1); }
    #answer-log { margin-top: 20px; background: #fff; padding: 10px; border-radius: 8px; }
    button { padding: 10px 20px; font-size: 16px; margin-top: 20px; }
  </style>
</head>
<body>
  <h1>‡§∏‡•ç‡§ï‡•à‡§´‡•ã‡§≤‡•ç‡§°‡§ø‡§Ç‡§ó ‡§∏‡•á‡§´‡•ç‡§ü‡•Ä ‡§á‡§Ç‡§ü‡§∞‡§µ‡•ç‡§Ø‡•Ç</h1>
  <div id="question-box">
    <p id="question">‡§™‡•ç‡§∞‡§∂‡•ç‡§® ‡§≤‡•ã‡§° ‡§π‡•ã ‡§∞‡§π‡•á ‡§π‡•à‡§Ç...</p>
    <button onclick="startRecognition()">üé§ ‡§â‡§§‡•ç‡§§‡§∞ ‡§¶‡•á‡§®‡§æ ‡§∂‡•Å‡§∞‡•Ç ‡§ï‡§∞‡•á‡§Ç</button>
    <button onclick="nextQuestion()">‚û°Ô∏è ‡§Ö‡§ó‡§≤‡§æ ‡§™‡•ç‡§∞‡§∂‡•ç‡§®</button>
    <button onclick="downloadAnswers()">üì• ‡§â‡§§‡•ç‡§§‡§∞ ‡§°‡§æ‡§â‡§®‡§≤‡•ã‡§° ‡§ï‡§∞‡•á‡§Ç</button>
  </div>
  <div id="answer-log">
    <h3>‡§Ü‡§™‡§ï‡•á ‡§â‡§§‡•ç‡§§‡§∞:</h3>
    <ul id="log"></ul>
  </div>
  <script>
    let questions = [];
    let current = 0;
    let answers = [];

    async function loadQuestions() {
      const res = await fetch('scaffolding_questions_hi.json');
      questions = await res.json();
      shuffle(questions);
      speak(questions[current]);
      document.getElementById('question').innerText = questions[current];
    }

    function shuffle(array) {
      for (let i = array.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [array[i], array[j]] = [array[j], array[i]];
      }
    }

    function speak(text) {
      const utter = new SpeechSynthesisUtterance(text);
      utter.lang = 'hi-IN';
      speechSynthesis.speak(utter);
    }

    function startRecognition() {
      const recognition = new webkitSpeechRecognition();
      recognition.lang = 'hi-IN';
      recognition.onresult = (event) => {
        const answer = event.results[0][0].transcript;
        answers.push({ question: questions[current], answer });
        const li = document.createElement('li');
        li.innerText = `${questions[current]}\nüó£Ô∏è ${answer}`;
        document.getElementById('log').appendChild(li);
      };
      recognition.start();
    }

    function nextQuestion() {
      if (current < questions.length - 1) {
        current++;
        document.getElementById('question').innerText = questions[current];
        speak(questions[current]);
      } else {
        alert("‡§∏‡§≠‡•Ä ‡§™‡•ç‡§∞‡§∂‡•ç‡§® ‡§™‡•Ç‡§∞‡•á ‡§π‡•ã ‡§ó‡§è ‡§π‡•à‡§Ç!");
      }
    }

    function downloadAnswers() {
      let content = "‡§∏‡•ç‡§ï‡•à‡§´‡•ã‡§≤‡•ç‡§°‡§ø‡§Ç‡§ó ‡§∏‡•á‡§´‡•ç‡§ü‡•Ä ‡§á‡§Ç‡§ü‡§∞‡§µ‡•ç‡§Ø‡•Ç ‡§â‡§§‡•ç‡§§‡§∞\n\n";
      answers.forEach((item, i) => {
        content += `Q${i + 1}: ${item.question}\nA: ${item.answer}\n\n`;
      });
      const blob = new Blob([content], { type: 'text/plain;charset=utf-8' });
      const a = document.createElement('a');
      a.href = URL.createObjectURL(blob);
      a.download = 'scaffolding_interview_answers.txt';
      a.click();
    }

    loadQuestions();
  </script>
</body>
</html>
